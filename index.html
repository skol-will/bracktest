<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Scrollable Bracket Selector</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #121212;
    color: #eee;
    display: flex;
    justify-content: center;
    padding: 20px;
    overflow-x: hidden;
  }
  .bracket-container {
    overflow-x: auto;
    width: 100vw;
    padding-bottom: 20px;
  }
  .bracket {
    display: flex;
    gap: 120px;
    align-items: flex-start;
    min-width: 900px;
    padding-bottom: 40px;
  }
  .round {
    display: flex;
    flex-direction: column;
    gap: 60px;
    min-width: 180px;
    align-items: center;
  }
  .round-title {
    font-weight: bold;
    font-size: 1.2rem;
    margin-bottom: 20px;
    user-select: none;
  }
  .matchup {
    display: flex;
    flex-direction: column;
    gap: 12px;
    align-items: center;
    width: 180px;
  }
  .match-label {
    font-size: 0.85rem;
    margin-bottom: 6px;
    text-align: center;
    user-select: none;
  }
  .teams {
    display: flex;
    gap: 12px;
    justify-content: center;
  }
  .team {
    width: 144px;
    height: 40px;
    background: #222;
    border-radius: 6px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    user-select: none;
    font-weight: 600;
    color: white;
    box-shadow: 0 0 5px rgba(0,0,0,0.7);
    transition: box-shadow 0.25s ease, transform 0.15s ease;
    border: 2px solid transparent;
  }
  .team.selected {
    border-color: #0a84ff;
    box-shadow: 0 0 14px #0a84ff;
    transform: scale(1.05);
    z-index: 10;
  }
  .team.disabled {
    opacity: 0.3;
    cursor: default;
  }
  .champion {
    margin-top: 15px;
    padding: 15px 30px;
    background: #0a84ff;
    border-radius: 8px;
    font-weight: bold;
    font-size: 1.3rem;
    text-align: center;
    width: 180px;
    user-select: none;
  }
</style>
</head>
<body>

<div class="bracket-container">
  <div class="bracket">

    <div class="round" id="divisional">
      <div class="round-title">Divisional</div>
      <div class="matchup" data-match="1">
        <div class="match-label">Match 1</div>
        <div class="teams">
          <div class="team" data-round="divisional" data-match="1" data-team="1">Team 1</div>
          <div class="team" data-round="divisional" data-match="1" data-team="2">Team 2</div>
        </div>
      </div>
      <div class="matchup" data-match="2">
        <div class="match-label">Match 2</div>
        <div class="teams">
          <div class="team" data-round="divisional" data-match="2" data-team="3">Team 3</div>
          <div class="team" data-round="divisional" data-match="2" data-team="4">Team 4</div>
        </div>
      </div>
      <div class="matchup" data-match="3">
        <div class="match-label">Match 3</div>
        <div class="teams">
          <div class="team" data-round="divisional" data-match="3" data-team="5">Team 5</div>
          <div class="team" data-round="divisional" data-match="3" data-team="6">Team 6</div>
        </div>
      </div>
      <div class="matchup" data-match="4">
        <div class="match-label">Match 4</div>
        <div class="teams">
          <div class="team" data-round="divisional" data-match="4" data-team="7">Team 7</div>
          <div class="team" data-round="divisional" data-match="4" data-team="8">Team 8</div>
        </div>
      </div>
    </div>

    <div class="round" id="conference">
      <div class="round-title">Conference</div>
      <div class="matchup" data-match="1">
        <div class="match-label">Match 1</div>
        <div class="teams">
          <div class="team disabled" data-round="conference" data-match="1" data-team="">Select Winner</div>
          <div class="team disabled" data-round="conference" data-match="1" data-team="">Select Winner</div>
        </div>
      </div>
      <div class="matchup" data-match="2">
        <div class="match-label">Match 2</div>
        <div class="teams">
          <div class="team disabled" data-round="conference" data-match="2" data-team="">Select Winner</div>
          <div class="team disabled" data-round="conference" data-match="2" data-team="">Select Winner</div>
        </div>
      </div>
    </div>

    <div class="round" id="championship">
      <div class="round-title">Championship</div>
      <div class="matchup" data-match="1">
        <div class="match-label">Match 1</div>
        <div class="teams">
          <div class="team disabled" data-round="championship" data-match="1" data-team="">Select Winner</div>
          <div class="team disabled" data-round="championship" data-match="1" data-team="">Select Winner</div>
        </div>
      </div>
    </div>

    <div class="round" id="champion-round">
      <div class="round-title">Champion</div>
      <div class="champion" id="champion">No Champion Yet</div>
    </div>

  </div>
</div>

<script>
  const bracket = {
    divisional: {
      1: ['', ''],
      2: ['', ''],
      3: ['', ''],
      4: ['', '']
    },
    conference: {
      1: ['', ''],
      2: ['', '']
    },
    championship: {
      1: ['', '']
    },
    champion: ''
  };

  // Helper to update matchup teams
  function updateMatchup(round, match, teams) {
    const matchup = document.querySelector(`#${round} .matchup[data-match="${match}"] .teams`);
    if (!matchup) return;
    for (let i = 0; i < 2; i++) {
      const teamDiv = matchup.children[i];
      if (teams[i]) {
        teamDiv.textContent = `Team ${teams[i]}`;
        teamDiv.dataset.team = teams[i];
        teamDiv.classList.remove('disabled');
      } else {
        teamDiv.textContent = 'Select Winner';
        teamDiv.dataset.team = '';
        teamDiv.classList.add('disabled');
      }
      teamDiv.classList.remove('selected');
    }
  }

  // Populate Divisional with initial teams (fixed labels)
  function populateDivisional() {
    for (let match = 1; match <= 4; match++) {
      const matchup = document.querySelector(`#divisional .matchup[data-match="${match}"] .teams`);
      matchup.children[0].textContent = `Team ${(match - 1) * 2 + 1}`;
      matchup.children[0].dataset.team = `${(match - 1) * 2 + 1}`;
      matchup.children[0].classList.remove('selected', 'disabled');
      matchup.children[1].textContent = `Team ${(match - 1) * 2 + 2}`;
      matchup.children[1].dataset.team = `${(match - 1) * 2 + 2}`;
      matchup.children[1].classList.remove('selected', 'disabled');
    }
  }

  // Clear downstream rounds when deselecting
  function clearDownstream(round, match) {
    if (round === 'divisional') {
      const nextMatch = Math.ceil(match / 2);
      updateMatchup('conference', nextMatch, ['', '']);
      updateMatchup('championship', 1, ['', '']);
      setChampion('');
      bracket.conference[nextMatch] = ['', ''];
      bracket.championship[1] = ['', ''];
    } else if (round === 'conference') {
      updateMatchup('championship', 1, ['', '']);
      setChampion('');
      bracket.championship[1] = ['', ''];
    } else if (round === 'championship') {
      setChampion('');
    }
  }

  // Update champion display
  function setChampion(team) {
    const champDiv = document.getElementById('champion');
    bracket.champion = team;
    if (team) {
      champDiv.textContent = `Champion: Team ${team}`;
    } else {
      champDiv.textContent = 'No Champion Yet';
    }
  }

  // Handle clicks on team cards
  function handleTeamClick(e) {
    const el = e.currentTarget;
    if (el.classList.contains('disabled')) return;

    const round = el.dataset.round;
    const match = Number(el.dataset.match);
    const team = el.dataset.team;

    const isSelected = el.classList.contains('selected');

    if (isSelected) {
      // Deselect: remove selection and clear downstream
      el.classList.remove('selected');
      clearDownstream(round, match);

      if (round === 'divisional') {
        const nextMatch = Math.ceil(match / 2);
        if (bracket.conference[nextMatch].includes(team)) {
          bracket.conference[nextMatch] = bracket.conference[nextMatch].map(t => t === team ? '' : t);
          updateMatchup('conference', nextMatch, bracket.conference[nextMatch]);
          clearDownstream('conference', nextMatch);
        }
      } else if (round === 'conference') {
        if (bracket.championship[1].includes(team)) {
          bracket.championship[1] = bracket.championship[1].map(t => t === team ? '' : t);
          updateMatchup('championship', 1, bracket.championship[1]);
          clearDownstream('championship', 1);
        }
      } else if (round === 'championship') {
        if (bracket.champion === team) {
          setChampion('');
        }
      }
    } else {
      // Select: deselect siblings, mark this as selected and populate next round
      const siblings = el.parentElement.querySelectorAll('.team');
      siblings.forEach(sib => sib.classList.remove('selected'));
      el.classList.add('selected');

      if (round === 'divisional') {
        const nextMatch = Math.ceil(match / 2);
        const slot = (match % 2) === 1 ? 0 : 1;
        bracket.conference[nextMatch][slot] = team;
        updateMatchup('conference', nextMatch, bracket.conference[nextMatch]);
        clearDownstream('divisional', match);
      } else if (round === 'conference') {
        const slot = match === 1 ? 0 : 1;
        bracket.championship[1][slot] = team;
        updateMatchup('championship', 1, bracket.championship[1]);
        clearDownstream('conference', match);
      } else if (round === 'championship') {
        setChampion(team);
        clearDownstream('championship', 1);
      }
    }
  }

  // Initialize everything
  function init() {
    populateDivisional();
    document.querySelectorAll('.team').forEach(el => {
      el.addEventListener('click', handleTeamClick);
    });
    // Initialize bracket data structure
    for(let i=1; i<=4; i++) bracket.divisional[i] = ['', ''];
    for(let i=1; i<=2; i++) bracket.conference[i] = ['', ''];
    bracket.championship[1] = ['', ''];
    bracket.champion = '';
  }

  init();
</script>

</body>
</html>
