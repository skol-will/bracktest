<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simple Bracket Mechanics</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #222;
    color: #eee;
    display: flex;
    justify-content: center;
    padding: 20px;
  }
  .bracket {
    display: flex;
    gap: 60px;
  }
  .round {
    display: flex;
    flex-direction: column;
    gap: 40px;
    min-width: 160px;
    align-items: center;
  }
  .round-title {
    font-weight: bold;
    margin-bottom: 20px;
    text-align: center;
  }
  .matchup {
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
  }
  .team {
    width: 144px;
    height: 40px;
    border-radius: 6px;
    background-size: cover;
    background-position: center;
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    text-shadow: 0 0 5px rgba(0,0,0,0.8);
    transition: box-shadow 0.3s ease, transform 0.2s ease;
    border: 2px solid transparent;
  }
  .team.selected {
    border-color: #0a84ff;
    box-shadow: 0 0 8px #0a84ff;
    transform: scale(1.05);
    z-index: 10;
  }
  .team.disabled {
    opacity: 0.5;
    cursor: default;
  }
  .champion {
    margin-top: 20px;
    padding: 15px;
    background: #0a84ff;
    border-radius: 8px;
    min-width: 160px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.3rem;
    text-shadow: 0 0 5px rgba(0,0,0,0.7);
  }
</style>
</head>
<body>

<div class="bracket">

  <div class="round" id="quarterfinals">
    <div class="round-title">Quarterfinals</div>
    <div class="matchup" data-match="1">
      <div class="team" data-round="quarter" data-match="1" data-team="A" style="background-color: #1f77b4;">Team A</div>
      <div class="team" data-round="quarter" data-match="1" data-team="B" style="background-color: #ff7f0e;">Team B</div>
    </div>
    <div class="matchup" data-match="2">
      <div class="team" data-round="quarter" data-match="2" data-team="C" style="background-color: #2ca02c;">Team C</div>
      <div class="team" data-round="quarter" data-match="2" data-team="D" style="background-color: #d62728;">Team D</div>
    </div>
    <div class="matchup" data-match="3">
      <div class="team" data-round="quarter" data-match="3" data-team="E" style="background-color: #9467bd;">Team E</div>
      <div class="team" data-round="quarter" data-match="3" data-team="F" style="background-color: #8c564b;">Team F</div>
    </div>
    <div class="matchup" data-match="4">
      <div class="team" data-round="quarter" data-match="4" data-team="G" style="background-color: #e377c2;">Team G</div>
      <div class="team" data-round="quarter" data-match="4" data-team="H" style="background-color: #7f7f7f;">Team H</div>
    </div>
  </div>

  <div class="round" id="semifinals">
    <div class="round-title">Semifinals</div>
    <div class="matchup" data-match="1">
      <div class="team disabled" data-round="semi" data-match="1" data-team="">Select Winner</div>
      <div class="team disabled" data-round="semi" data-match="1" data-team="">Select Winner</div>
    </div>
    <div class="matchup" data-match="2">
      <div class="team disabled" data-round="semi" data-match="2" data-team="">Select Winner</div>
      <div class="team disabled" data-round="semi" data-match="2" data-team="">Select Winner</div>
    </div>
  </div>

  <div class="round" id="final">
    <div class="round-title">Final</div>
    <div class="matchup" data-match="1">
      <div class="team disabled" data-round="final" data-match="1" data-team="">Select Winner</div>
      <div class="team disabled" data-round="final" data-match="1" data-team="">Select Winner</div>
    </div>
  </div>

  <div class="round" id="champion-round">
    <div class="round-title">Champion</div>
    <div class="champion" id="champion">No Champion Yet</div>
  </div>

</div>

<script>
  const bracketData = {
    quarterfinals: {
      1: ['A', 'B'],
      2: ['C', 'D'],
      3: ['E', 'F'],
      4: ['G', 'H']
    },
    semifinals: {
      1: ['', ''],
      2: ['', '']
    },
    final: {
      1: ['', '']
    },
    champion: ''
  };

  function getTeamElement(round, match, team) {
    return document.querySelector(`.team[data-round="${round}"][data-match="${match}"][data-team="${team}"]`);
  }

  function getMatchup(round, match) {
    return document.querySelector(`.round#${round} .matchup[data-match="${match}"]`);
  }

  function updateMatchup(round, match, teams) {
    const matchup = getMatchup(round, match);
    if (!matchup) return;
    const teamDivs = matchup.querySelectorAll('.team');
    teams.forEach((teamName, idx) => {
      const teamDiv = teamDivs[idx];
      if (teamName) {
        teamDiv.textContent = "Team " + teamName;
        teamDiv.dataset.team = teamName;
        teamDiv.classList.remove('disabled');
      } else {
        teamDiv.textContent = 'Select Winner';
        teamDiv.dataset.team = '';
        teamDiv.classList.add('disabled');
      }
      teamDiv.classList.remove('selected');
    });
  }

  function clearDownstream(round, match) {
    if (round === 'quarterfinals') {
      // clear semifinal and down
      updateMatchup('semifinals', Math.ceil(match/2), ['', '']);
      updateMatchup('final', 1, ['', '']);
      setChampion('');
    } else if (round === 'semifinals') {
      // clear final and champion
      updateMatchup('final', 1, ['', '']);
      setChampion('');
    } else if (round === 'final') {
      // clear champion
      setChampion('');
    }
  }

  function setChampion(teamName) {
    const champDiv = document.getElementById('champion');
    bracketData.champion = teamName;
    if (teamName) {
      champDiv.textContent = "Champion: Team " + teamName;
    } else {
      champDiv.textContent = "No Champion Yet";
    }
  }

  function handleTeamClick(e) {
    const el = e.currentTarget;
    if (el.classList.contains('disabled')) return;

    const round = el.dataset.round;
    const match = parseInt(el.dataset.match);
    const team = el.dataset.team;

    const selected = el.classList.contains('selected');

    if (selected) {
      // deselect and clear downstream
      el.classList.remove('selected');
      clearDownstream(round, match);
    } else {
      // select this team and update next round
      // deselect other in same matchup
      const siblings = el.parentElement.querySelectorAll('.team');
      siblings.forEach(sib => sib.classList.remove('selected'));
      el.classList.add('selected');

      if (round === 'quarterfinals') {
        // advance to semifinals
        const semiMatch = Math.ceil(match / 2);
        const semiTeams = bracketData.semifinals[semiMatch];
        const teamIdx = (match % 2 === 1) ? 0 : 1;
        semiTeams[teamIdx] = team;
        bracketData.semifinals[semiMatch] = semiTeams;
        updateMatchup('semifinals', semiMatch, semiTeams);
        clearDownstream('quarterfinals', match);
      } else if (round === 'semifinals') {
        // advance to final
        const finalTeams = bracketData.final[1];
        const finalMatch = 1;
        const semiMatch = match;
        const teamIdx = (semiMatch === 1) ? 0 : 1;
        finalTeams[teamIdx] = team;
        bracketData.final[finalMatch] = finalTeams;
        updateMatchup('final', finalMatch, finalTeams);
        clearDownstream('semifinals', match);
      } else if (round === 'final') {
        // set champion
        setChampion(team);
        clearDownstream('final', match);
      }
    }
  }

  function setup() {
    const teams = document.querySelectorAll('.team');
    teams.forEach(team => {
      team.addEventListener('click', handleTeamClick);
    });
  }

  setup();
</script>

</body>
</html>
